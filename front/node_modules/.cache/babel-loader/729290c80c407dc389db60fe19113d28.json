{"ast":null,"code":"import _regeneratorRuntime from\"/Users/santoshsingh/Documents/WebDevelopment/ReactJS/MoviesApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/santoshsingh/Documents/WebDevelopment/ReactJS/MoviesApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useContext}from\"react\";import axios from\"axios\";import*as TagNames from\"../js/constants/constants\";import MoviesList from\"../jsx/moviesList\";import UserContext from\"../js/contexts/userContext\";import MovieContext from\"../js/contexts/movieContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useContext=useContext(UserContext),currentUser=_useContext.currentUser;var _useContext2=useContext(MovieContext),movies=_useContext2.movies,addMovies=_useContext2.addMovies;var imagepath=TagNames.getImagePath();useEffect(function(){var abortController=new AbortController();if(movies.length===0){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(URL,_ref){var signal,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:signal=_ref.signal;_context.next=3;return axios.get(URL);case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;addMovies(data.results);case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(_x,_x2){return _ref2.apply(this,arguments);};}();fetchData(TagNames.getURL(),abortController.signal);return function cleanup(){abortController.abort();};}else{console.log(\"data already fetched\");}},[]);// Or [] if effect doesn't need props or state\nif(movies.length===0){return/*#__PURE__*/_jsx(\"h3\",{children:\"Movies not found.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Username: \",currentUser.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"home\",children:/*#__PURE__*/_jsx(MoviesList,{movies:movies,count:movies.length})})]});};export default Home;","map":{"version":3,"sources":["/Users/santoshsingh/Documents/WebDevelopment/ReactJS/MoviesApp/src/components/pages/home.jsx"],"names":["React","useEffect","useContext","axios","TagNames","MoviesList","UserContext","MovieContext","Home","currentUser","movies","addMovies","imagepath","getImagePath","abortController","AbortController","length","fetchData","URL","signal","get","data","results","getURL","cleanup","abort","console","log","name"],"mappings":"uWAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,KAA6C,OAA7C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,2BAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,6BAAzB,C,wFAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACjB,gBAAwBN,UAAU,CAACI,WAAD,CAAlC,CAAQG,WAAR,aAAQA,WAAR,CACA,iBAA8BP,UAAU,CAACK,YAAD,CAAxC,CAAQG,MAAR,cAAQA,MAAR,CAAgBC,SAAhB,cAAgBA,SAAhB,CACA,GAAMC,CAAAA,SAAS,CAAGR,QAAQ,CAACS,YAAT,EAAlB,CAEAZ,SAAS,CAAC,UAAM,CACd,GAAMa,CAAAA,eAAe,CAAG,GAAIC,CAAAA,eAAJ,EAAxB,CACA,GAAIL,MAAM,CAACM,MAAP,GAAkB,CAAtB,CAAyB,IACRC,CAAAA,SADQ,2FACvB,iBAAyBC,GAAzB,wJAAgCC,MAAhC,MAAgCA,MAAhC,uBAEyBhB,CAAAA,KAAK,CAACiB,GAAN,CAAUF,GAAV,CAFzB,uCAEUG,IAFV,kBAEUA,IAFV,CAGEV,SAAS,CAACU,IAAI,CAACC,OAAN,CAAT,CAHF,sDADuB,kBACRL,CAAAA,SADQ,kDAMvBA,SAAS,CAACb,QAAQ,CAACmB,MAAT,EAAD,CAAoBT,eAAe,CAACK,MAApC,CAAT,CACA,MAAO,SAASK,CAAAA,OAAT,EAAmB,CACxBV,eAAe,CAACW,KAAhB,GACD,CAFD,CAGD,CAVD,IAUO,CACLC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACD,CACF,CAfQ,CAeN,EAfM,CAAT,CAeQ;AAER,GAAIjB,MAAM,CAACM,MAAP,GAAkB,CAAtB,CAAyB,CACvB,mBAAO,yCAAP,CACD,CAED,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,oCAAgBP,WAAW,CAACmB,IAA5B,GADF,cAEE,YAAK,SAAS,CAAC,MAAf,uBACE,KAAC,UAAD,EAAY,MAAM,CAAElB,MAApB,CAA4B,KAAK,CAAEA,MAAM,CAACM,MAA1C,EADF,EAFF,GADF,CAQD,CAlCD,CAoCA,cAAeR,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport * as TagNames from \"../js/constants/constants\";\nimport MoviesList from \"../jsx/moviesList\";\nimport UserContext from \"../js/contexts/userContext\";\nimport MovieContext from \"../js/contexts/movieContext\";\n\nconst Home = () => {\n  const { currentUser } = useContext(UserContext);\n  const { movies, addMovies } = useContext(MovieContext);\n  const imagepath = TagNames.getImagePath();\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    if (movies.length === 0) {\n      async function fetchData(URL, { signal }) {\n        // You can await here\n        const { data } = await axios.get(URL);\n        addMovies(data.results);\n      }\n      fetchData(TagNames.getURL(), abortController.signal);\n      return function cleanup() {\n        abortController.abort();\n      };\n    } else {\n      console.log(\"data already fetched\");\n    }\n  }, []); // Or [] if effect doesn't need props or state\n\n  if (movies.length === 0) {\n    return <h3>Movies not found.</h3>;\n  }\n\n  return (\n    <div className=\"container\">\n      <div>Username: {currentUser.name}</div>\n      <div className=\"home\">\n        <MoviesList movies={movies} count={movies.length} />\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}