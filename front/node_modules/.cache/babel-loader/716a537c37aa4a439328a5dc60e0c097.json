{"ast":null,"code":"import _regeneratorRuntime from\"/Users/santoshsingh/Documents/WebDevelopment/ReactJS/MoviesApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/santoshsingh/Documents/WebDevelopment/ReactJS/MoviesApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/santoshsingh/Documents/WebDevelopment/ReactJS/MoviesApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from\"react\";import MovieContext from\"../js/contexts/movieContext\";import*as TagNames from\"../js/constants/constants\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieDetails=function MovieDetails(props){var _useContext=useContext(MovieContext),movies=_useContext.movies;var id=props.match.params.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),videoLinK=_useState4[0],setVideoLink=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),videoStatus=_useState6[0],setVideoStatus=_useState6[1];useEffect(function(){var abortController=new AbortController();function fetchData(_x,_x2){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id,_ref){var signal,selectedMovie;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:signal=_ref.signal;_context.prev=1;_context.next=4;return movies.filter(function(m){return m.id===parseInt(id);});case 4:selectedMovie=_context.sent;setMovie(selectedMovie[0]);handleVideo(id);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(\"Error: \",_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _fetchData.apply(this,arguments);}if(id){fetchData(id,abortController.signal);}return function cleanup(){abortController.abort();};},[]);var handleVideo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var _data$results$;var _yield$axios$get,data,videoLink,video;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(TagNames.getVideoKey(id));case 2:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;_context2.next=6;return(_data$results$=data.results[0])===null||_data$results$===void 0?void 0:_data$results$.key;case 6:if(!_context2.sent){_context2.next=10;break;}_context2.t0=TagNames.getVideoLink(data.results[0].key);_context2.next=11;break;case 10:_context2.t0=\"\";case 11:videoLink=_context2.t0;video=videoLink?true:false;setVideoLink(videoLink);setVideoStatus(video);case 15:case\"end\":return _context2.stop();}}},_callee2);}));return function handleVideo(_x3){return _ref2.apply(this,arguments);};}();console.log(movie);return/*#__PURE__*/_jsx(\"div\",{className:\"MovieDetail\",children:movie.id&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{className:\"back-cover\",src:TagNames.getImagePath(movie.poster_path),srcSet:TagNames.getImagePath(movie.poster_path),alt:movie.title,loading:\"lazy\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"MovieInfo\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"front-cover\",src:TagNames.getImagePath(movie.backdrop_path),srcSet:TagNames.getImagePath(movie.backdrop_path),alt:movie.title,loading:\"lazy\"}),/*#__PURE__*/_jsx(\"h1\",{children:movie.title.toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"overview\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Overview\"}),/*#__PURE__*/_jsx(\"p\",{children:movie.overview})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Rating: \",movie.vote_average,\"/10\"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Language: \",movie.original_language.toUpperCase()]})]}),videoStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"videoPlayer\",children:/*#__PURE__*/_jsx(\"iframe\",{src:videoLinK,title:\"YouTube video player\",frameborder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowfullscreen:true})})]})]})});};export default MovieDetails;","map":{"version":3,"sources":["/Users/santoshsingh/Documents/WebDevelopment/ReactJS/MoviesApp/src/components/pages/movieDetails.jsx"],"names":["React","useState","useContext","useEffect","MovieContext","TagNames","axios","MovieDetails","props","movies","id","match","params","movie","setMovie","videoLinK","setVideoLink","videoStatus","setVideoStatus","abortController","AbortController","fetchData","signal","filter","m","parseInt","selectedMovie","handleVideo","console","log","cleanup","abort","get","getVideoKey","data","results","key","getVideoLink","videoLink","video","getImagePath","poster_path","title","backdrop_path","toUpperCase","overview","vote_average","original_language"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport MovieContext from \"../js/contexts/movieContext\";\nimport * as TagNames from \"../js/constants/constants\";\nimport axios from \"axios\";\nconst MovieDetails = (props) => {\n  const { movies } = useContext(MovieContext);\n  const id = props.match.params.id;\n  const [movie, setMovie] = useState([]);\n  const [videoLinK, setVideoLink] = useState(\"\");\n  const [videoStatus, setVideoStatus] = useState(false);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    async function fetchData(id, { signal }) {\n      // You can await here\n      try {\n        const selectedMovie = await movies.filter((m) => m.id === parseInt(id));\n        setMovie(selectedMovie[0]);\n        handleVideo(id);\n      } catch (ex) {\n        console.log(\"Error: \", ex);\n      }\n    }\n    if (id) {\n      fetchData(id, abortController.signal);\n    }\n\n    return function cleanup() {\n      abortController.abort();\n    };\n  }, []);\n\n  const handleVideo = async (id) => {\n    const { data } = await axios.get(TagNames.getVideoKey(id));\n    const videoLink = (await data.results[0]?.key)\n      ? TagNames.getVideoLink(data.results[0].key)\n      : \"\";\n\n    const video = videoLink ? true : false;\n    setVideoLink(videoLink);\n    setVideoStatus(video);\n  };\n\n  console.log(movie);\n  return (\n    <div className=\"MovieDetail\">\n      {movie.id && (\n        <div>\n          <img\n            className=\"back-cover\"\n            src={TagNames.getImagePath(movie.poster_path)}\n            srcSet={TagNames.getImagePath(movie.poster_path)}\n            alt={movie.title}\n            loading=\"lazy\"\n          ></img>\n          <div className=\"MovieInfo\">\n            <img\n              className=\"front-cover\"\n              src={TagNames.getImagePath(movie.backdrop_path)}\n              srcSet={TagNames.getImagePath(movie.backdrop_path)}\n              alt={movie.title}\n              loading=\"lazy\"\n            ></img>\n            <h1>{movie.title.toUpperCase()}</h1>\n            <div className=\"overview\">\n              <h5>Overview</h5>\n              <p>{movie.overview}</p>\n            </div>\n            <div>\n              <h4>Rating: {movie.vote_average}/10</h4>\n              <h4>Language: {movie.original_language.toUpperCase()}</h4>\n            </div>\n            {videoStatus && (\n              <div className=\"videoPlayer\">\n                <iframe\n                  src={videoLinK}\n                  title=\"YouTube video player\"\n                  frameborder=\"0\"\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowfullscreen\n                ></iframe>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MovieDetails;\n"]},"metadata":{},"sourceType":"module"}