{"ast":null,"code":"var _jsxFileName = \"/Users/santoshsingh/Documents/WebDevelopment/ReactEcomApp/frontend/src/components/Pages/home.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport * as TagNames from \"../constants/constants\";\nimport VideoPlayer from \"../common/videoPlayer\";\nimport MoviesList from \"../common/moviesList\";\nimport PaginationBar from \"../common/paginationBar\";\nimport { Paginate } from \"../common/js/paginate\";\nimport UserContext from \"../Contexts/userContext\";\nimport MovieContext from \"../Contexts/movieContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const {\n    currentUser\n  } = useContext(UserContext);\n  const {\n    moviesList,\n    addMovies\n  } = useContext(MovieContext); // const [trending, setTrending] = useState([]);\n  // const [currentPage, setCurrentPage] = useState(1);\n  // const [pageSize] = useState(20);\n\n  const [videoLink, setVideoLink] = useState(\"\");\n  const [videoStatus, setVideoStatus] = useState(false);\n  const imagepath = TagNames.getImagePath();\n  const count = moviesList.length; // const movies = Paginate(moviesList, currentPage, pageSize);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    if (trending.length === 0) {\n      async function fetchData(URL, {\n        signal\n      }) {\n        // You can await here\n        const {\n          data\n        } = await axios.get(URL);\n        addMovies(data.results);\n        setTrending(moviesList);\n      }\n\n      fetchData(TagNames.getURL(), abortController.signal);\n      return function cleanup() {\n        abortController.abort();\n      };\n    }\n\n    console.log(trending);\n  }, [trending]); // Or [] if effect doesn't need props or state\n\n  const handleVideo = async id => {\n    var _data$results$;\n\n    const {\n      data\n    } = await axios.get(TagNames.getVideoKey(id));\n    const videoLink = (await ((_data$results$ = data.results[0]) === null || _data$results$ === void 0 ? void 0 : _data$results$.key)) ? TagNames.getVideoLink(data.results[0].key) : \"\";\n    const video = videoLink ? true : false;\n    setVideoLink(videoLink);\n    setVideoStatus(video);\n  };\n\n  const handleVideoClose = status => {\n    setVideoStatus(status);\n  };\n\n  const handlePageChange = currentPage => {\n    console.log(currentPage);\n    setCurrentPage(currentPage);\n  };\n\n  if (movies.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Movies not found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Username: \", currentUser.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home\",\n      children: /*#__PURE__*/_jsxDEV(MoviesList, {\n        movies: movies,\n        count: count,\n        image_path: imagepath,\n        get_video: handleVideo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"NYLGN8L8775ycQYvxpW4j1vUNgU=\");\n\n_c = Home;\nexport default Home; ///--------\n// class Home extends Component {\n//   state = {\n//     data: [],\n//     results: [],\n//     videoLink: \"\",\n//     video: false,\n//     transform: 0,\n//     currentPage: 1,\n//     pageSize: 4,\n//   };\n//   componentDidMount = async () => {\n//     const { data } = await axios.get(TagNames.getURL());\n//     console.log(data);\n//     const { results } = data.ecom;\n//     this.setState({ results });\n//   };\n//   componentWillUnmount = () => {\n//     window.removeEventListener(\"scroll\", this.handleScroll);\n//   };\n//   handleScroll = (event) => {\n//     let scrollTop = event.target.scrollingElement.scrollTop,\n//       itemTranslate = Math.min(0, scrollTop / 3 - 60);\n//     this.setState({ transform: itemTranslate });\n//   };\n//   handleVideo = async (id) => {\n//     const { data } = await axios.get(TagNames.getVideoKey(id));\n//     const videoLink = (await data.results[0]?.key)\n//       ? TagNames.getVideoLink(data.results[0].key)\n//       : \"\";\n//     const video = videoLink ? true : false;\n//     this.setState({ videoLink, video });\n//   };\n//   handleVideoClose = (status) => {\n//     this.setState({ video: status });\n//   };\n//   handlePageChange = (currentPage) => {\n//     console.log(currentPage);\n//     this.setState({ currentPage });\n//   };\n//   render() {\n//     const { results, videoLink, video, currentPage, pageSize } = this.state;\n//     const imagepath = TagNames.getImagePath();\n//     const movies = Paginate(results, currentPage, pageSize);\n//     const count = results.length;\n//     if (results.length === 0) {\n//       return <h3>Movies not found.</h3>;\n//     }\n//     return (\n//       <div className=\"container\">\n//         <div className=\"home\">\n//           <MoviesList\n//             moviesList={movies}\n//             count={count}\n//             imagePath={imagepath}\n//             getVideo={this.handleVideo}\n//           />\n//           <PaginationBar\n//             itemCount={count}\n//             pageSize={pageSize}\n//             currentPage={1}\n//             onPageChange={this.handlePageChange}\n//           />\n//           <VideoPlayer\n//             trailerLink={videoLink}\n//             status={video}\n//             handleVideoClose={this.handleVideoClose}\n//           />\n//         </div>\n//       </div>\n//     );\n//   }\n// }\n// export default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/santoshsingh/Documents/WebDevelopment/ReactEcomApp/frontend/src/components/Pages/home.jsx"],"names":["React","useState","useEffect","useContext","axios","TagNames","VideoPlayer","MoviesList","PaginationBar","Paginate","UserContext","MovieContext","Home","currentUser","moviesList","addMovies","videoLink","setVideoLink","videoStatus","setVideoStatus","imagepath","getImagePath","count","length","abortController","AbortController","trending","fetchData","URL","signal","data","get","results","setTrending","getURL","cleanup","abort","console","log","handleVideo","id","getVideoKey","key","getVideoLink","video","handleVideoClose","status","handlePageChange","currentPage","setCurrentPage","movies","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport axios from \"axios\";\nimport * as TagNames from \"../constants/constants\";\nimport VideoPlayer from \"../common/videoPlayer\";\nimport MoviesList from \"../common/moviesList\";\nimport PaginationBar from \"../common/paginationBar\";\nimport { Paginate } from \"../common/js/paginate\";\nimport UserContext from \"../Contexts/userContext\";\nimport MovieContext from \"../Contexts/movieContext\";\n\nconst Home = () => {\n  const { currentUser } = useContext(UserContext);\n  const { moviesList, addMovies } = useContext(MovieContext);\n\n  // const [trending, setTrending] = useState([]);\n  // const [currentPage, setCurrentPage] = useState(1);\n  // const [pageSize] = useState(20);\n  const [videoLink, setVideoLink] = useState(\"\");\n  const [videoStatus, setVideoStatus] = useState(false);\n  const imagepath = TagNames.getImagePath();\n  const count = moviesList.length;\n  // const movies = Paginate(moviesList, currentPage, pageSize);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    if (trending.length === 0) {\n      async function fetchData(URL, { signal }) {\n        // You can await here\n        const { data } = await axios.get(URL);\n        addMovies(data.results);\n        setTrending(moviesList);\n      }\n      fetchData(TagNames.getURL(), abortController.signal);\n      return function cleanup() {\n        abortController.abort();\n      };\n    }\n    console.log(trending);\n  }, [trending]); // Or [] if effect doesn't need props or state\n\n  const handleVideo = async (id) => {\n    const { data } = await axios.get(TagNames.getVideoKey(id));\n    const videoLink = (await data.results[0]?.key)\n      ? TagNames.getVideoLink(data.results[0].key)\n      : \"\";\n\n    const video = videoLink ? true : false;\n    setVideoLink(videoLink);\n    setVideoStatus(video);\n  };\n\n  const handleVideoClose = (status) => {\n    setVideoStatus(status);\n  };\n\n  const handlePageChange = (currentPage) => {\n    console.log(currentPage);\n    setCurrentPage(currentPage);\n  };\n\n  if (movies.length === 0) {\n    return <h3>Movies not found.</h3>;\n  }\n\n  return (\n    <div className=\"container\">\n      <div>Username: {currentUser.name}</div>\n      <div className=\"home\">\n        <MoviesList\n          movies={movies}\n          count={count}\n          image_path={imagepath}\n          get_video={handleVideo}\n        />\n\n        {/* <PaginationBar\n          itemCount={count}\n          pageSize={pageSize}\n          currentPage={1}\n          onPageChange={handlePageChange}\n        />\n\n        <VideoPlayer\n          trailerLink={videoLink}\n          status={videoStatus}\n          handleVideoClose={handleVideoClose}\n        /> */}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n\n///--------\n// class Home extends Component {\n//   state = {\n//     data: [],\n//     results: [],\n//     videoLink: \"\",\n//     video: false,\n//     transform: 0,\n//     currentPage: 1,\n//     pageSize: 4,\n//   };\n\n//   componentDidMount = async () => {\n//     const { data } = await axios.get(TagNames.getURL());\n//     console.log(data);\n//     const { results } = data.ecom;\n\n//     this.setState({ results });\n//   };\n\n//   componentWillUnmount = () => {\n//     window.removeEventListener(\"scroll\", this.handleScroll);\n//   };\n\n//   handleScroll = (event) => {\n//     let scrollTop = event.target.scrollingElement.scrollTop,\n//       itemTranslate = Math.min(0, scrollTop / 3 - 60);\n//     this.setState({ transform: itemTranslate });\n//   };\n\n//   handleVideo = async (id) => {\n//     const { data } = await axios.get(TagNames.getVideoKey(id));\n//     const videoLink = (await data.results[0]?.key)\n//       ? TagNames.getVideoLink(data.results[0].key)\n//       : \"\";\n\n//     const video = videoLink ? true : false;\n//     this.setState({ videoLink, video });\n//   };\n\n//   handleVideoClose = (status) => {\n//     this.setState({ video: status });\n//   };\n\n//   handlePageChange = (currentPage) => {\n//     console.log(currentPage);\n//     this.setState({ currentPage });\n//   };\n\n//   render() {\n//     const { results, videoLink, video, currentPage, pageSize } = this.state;\n//     const imagepath = TagNames.getImagePath();\n//     const movies = Paginate(results, currentPage, pageSize);\n//     const count = results.length;\n\n//     if (results.length === 0) {\n//       return <h3>Movies not found.</h3>;\n//     }\n\n//     return (\n//       <div className=\"container\">\n//         <div className=\"home\">\n//           <MoviesList\n//             moviesList={movies}\n//             count={count}\n//             imagePath={imagepath}\n//             getVideo={this.handleVideo}\n//           />\n\n//           <PaginationBar\n//             itemCount={count}\n//             pageSize={pageSize}\n//             currentPage={1}\n//             onPageChange={this.handlePageChange}\n//           />\n\n//           <VideoPlayer\n//             trailerLink={videoLink}\n//             status={video}\n//             handleVideoClose={this.handleVideoClose}\n//           />\n//         </div>\n//       </div>\n//     );\n//   }\n// }\n\n// export default Home;\n"]},"metadata":{},"sourceType":"module"}